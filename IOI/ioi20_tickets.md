# IOI 2020 Day 1 3번 Carnival Tickets

## 문제

$n$개의 색 중 하나와 음이 아닌 정수로 이루어진 티켓이 있다. 유찬이는 $n$가지 색의 티켓을 색별로 $m$장씩 가지고 있다. $i$번째 색의 티켓 중 $j$번에 쓰여 있는 숫자는 x[$i$][$j$]라고 한다. ($0 \leq i \leq n-1$, $0 \leq j \leq m-1$)

유찬이는 $k$개의 라운드로 구성된 게임에 참여한다. 게임에서 각각의 라운드는 다음과 같이 구성되어 있다:

+ 유찬이가 색깔별로 한 장씩 $n$장의 티켓을 고른다.
+ 딜러는 유찬이가 고른 $n$장의 티켓에 쓰여있는 숫자를 메모한다. 이 숫자들을 a[$0$], a[$1$], $\cdots$ , a[$n-1$]이라 한다.
+ 딜러가 한 장의 숫자 카드를 뽑는다. 해당 숫자 카드에 쓰여있는 정수는 $b$이다.
+ 딜러가 $j$번째 라운드에서 유찬이가 고른 카드들과 딜러가 뽑은 숫자 카드의 차를 계산해 더한 값 $S_j$를 계산한다. 즉, $S_j = \sum\limits_{i=0}^{n-1} |a[i]-b|$이다.
+ 해당 라운드에서 유찬이가 고른 카드는 버려진다.

$k$개의 라운드가 전부 진행된 후, 남은 카드는 버려진다.

딜러 준혁이를 유심히 관찰하던 유찬이는 준혁이가 게임을 조작하고 있음을 발견했다! 준혁이가 [대국의 힘]을 사용해 $b$를 $S_j$를 최소화시키는 정수 $b$로 조작하고 있던 것이였다. 유찬이가 $A=\sum\limits_{j=1}^{k-1} S_j$ 합을 최대화시킬 수 있도록 도와주자.

## 구현

함수 find_maximum을 구현해야 한다.
> int64 find_maximum(int k, int[][] x)

+ k : 라운드의 수
+ x : 각 티켓에 쓰여 있는 수를 나타내는 크기 m $\times$ n 2차원 배열
+ 이 함수는 정확히 한 번 호출됨
+ $A$의 최댓값을 반환해야 함

함수 find_maximum에서는 함수 allocate_tickets가 다음의 조건으로 호출되어야 한다.
> void allocate_tickets(int[][] s)

+ s : 크기 m $\times$ n의 2차원 배열이다. s[$i$][$j$]의 값을 $r$이라 할 때, $i$번째 색의 $j$번째 카드가 사용되지 않았다면 $r=-1$이고, 사용되었다면 $r$을 카드가 사용된 라운드의 번호로 한다.
+ $0\leq i \leq n-1$인 정수 $i$에 대해 s[$i$][$0$], s[$i$][$1$], $\cdots$ , s[$i$][$m-1$]의 값은 $0$부터 $k-1$이 한 번씩 등장해야 하고 나머지의 값들은 모두 $-1$이다.
+ $A$를 최대화시키는 2차원 배열 $s$가 여러 개 존재한다면, 그 중 임의의 하나를 함수의 인자 $s$로 사용해도 된다.

## 제한

+ $2\leq n \leq 1500$이고, $n$을 $2$로 나눈 나머지가 $0$이다.
+ $1\leq k \leq m \leq 1500$
+ $0\leq$ x[$i$][$j$] $\leq 10^9$ ($0\leq i \leq n-1$, $0\leq j \leq m-1$)
+ x[$i$][$j-1$] $\leq$ x[$i$][$j$] ($0\leq i \leq n-1$, $1\leq j \leq m-1$)

## 예시 1

> find_maximum(2, [[0, 2, 5],[1, 1, 3]])

이 호출되었다 가정하자.

이것은 다음과 같은 사실을 의미한다.
+ $k=2$이므로 $2$라운드의 게임이다.
+ $0$번째 색상의 티켓에 쓰여 있는 숫자는 $0$, $2$, $5$이다.
+ $1$번째 색상의 티켓에 쓰여 있는 숫자는 $1$, $1$, $3$이다.

$A$를 최대화하는 가능한 플레이 중 하나는 다음과 같다.

+ 유찬이가 라운드 $0$에서 $0$번째 색 티켓으로 $0$번 티켓, $1$번째 색 티켓으로 $2$번 티켓을 선택한다. 준혁이는 $b=1$으로 조작해 $S_0=|1-0| + |1-3| = 3$이 된다.
+ 유찬이가 라운드 $1$에서 $0$번째 색 티켓으로 $2$번 티켓, $1$번째 색 티켓으로 $1$번 티켓을 선택한다. 준혁이는 $b=3$으로 조작해 $S_1=|3-1| + |3-5| = 4$가 된다.
+ 최대의 $A = S_0 + S_1 = 7$이다.

따라서 allocate_tickets([[0, -1, 1], [-1, 1, 0]])으로 함수를 호출하고, find_maximum에서 7을 반환한다.

## 서브태스크

|번호|배점|제한|
|:---|:---|:---|
|1|11|$m=1$|
|2|16|$k=1$|
|3|14|$0\leq$ x[$i$][$j$] $\leq 1$ ($0\leq i \leq n-1$, $0\leq j \leq m-1$)|
|4|14|$k=m$|
|5|12|$n\leq80$, $m\leq80$|
|6|23|$n\leq300$, $m\leq300$|
|7|10|추가 조건 없음|

## 첨부

+ [tickets.zip](https://upload.acmicpc.net/cf6577ef-d25c-4dfe-96f9-2527086ccd9a/)

# ticktes solution

준혁이가 뽑는 카드에 쓰인 숫자 $b$는 유찬이가 고른 카드에 쓰인 숫자 a[$0$], a[$1$], $\cdots$ , a[$n$]의 중앙값과 같다.

$n$이 짝수이므로, $S$는 수열 $a$의 큰 원소 $n/2$개의 합에서 작은 원소 $n/2$개의 합을 뺀 것과 같다.

